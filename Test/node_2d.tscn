[gd_scene load_steps=6 format=4 uid="uid://dprutu1f2icny"]

[ext_resource type="JSON" path="res://Test/squar.json" id="1_pf2jc"]
[ext_resource type="Script" uid="uid://c3jgyrwe6kosn" path="res://addons/json-atlas/Scripts/atlas_texture_json.gd" id="2_s4i0d"]
[ext_resource type="Texture2D" uid="uid://db8osw53211em" path="res://Test/squar.png" id="3_s4i0d"]

[sub_resource type="GDScript" id="GDScript_pf2jc"]
resource_name = "Test"
script/source = "extends Node2D

class PatternGroup:
	var content: String = \"\"
	var number: int = 0
	
	func _to_string() -> String:
		return \"{\"+content + \" \" + str(number) + \"}\"

func _ready() -> void:
	var patternOrder: Array[PatternGroup]
	var myReg: RegEx = RegEx.create_from_string(\"{(?<content>.*?(?<number>\\\\d*?))}\")
	for i: RegExMatch in myReg.search_all(\"{symbol},abc{symbolFrame0000}\"):
		var newPatGroup: PatternGroup = PatternGroup.new()
		newPatGroup.content = i.get_string(\"content\")
		newPatGroup.number = i.get_string(\"number\").length()
		patternOrder.append(newPatGroup)
		print(patternOrder)
	
	if patternOrder[0].content == \"symbol\" and patternOrder[1].content.begins_with(\"symbolFrame\"):
		print(\"CHARS TO REMOVE FROM BACK: \"+str(patternOrder[1].number))
	elif patternOrder[0].content.begins_with(\"symbolFrame\") and patternOrder[1].content == \"symbol\":
		print(\"CHARS TO REMOVE FROM FRONT: \"+str(patternOrder[0].number))
	else:
		printerr(\"INVALID\")
	patternOrder.clear()
	for i: RegExMatch in myReg.search_all(\"{symbolFrame00}{symbol}\"):
		var newPatGroup: PatternGroup = PatternGroup.new()
		newPatGroup.content = i.get_string(\"content\")
		newPatGroup.number = i.get_string(\"number\").length()
		patternOrder.append(newPatGroup)
		print(patternOrder)
	
	if patternOrder[0].content == \"symbol\" and patternOrder[1].content.begins_with(\"symbolFrame\"):
		print(\"CHARS TO REMOVE FROM BACK: \"+str(patternOrder[1].number))
	elif patternOrder[0].content.begins_with(\"symbolFrame\") and patternOrder[1].content == \"symbol\":
		print(\"CHARS TO REMOVE FROM FRONT: \"+str(patternOrder[0].number))
	else:
		printerr(\"INVALID\")
"

[sub_resource type="AtlasTexture" id="AtlasTexture_pbnok"]
atlas = ExtResource("3_s4i0d")
region = Rect2(124, 0, 20, 20)
script = ExtResource("2_s4i0d")
symbol = "SquarIdk"
texture = ExtResource("3_s4i0d")
split_frames = true
frame = 2
frames_end_nums = 5
frame_behaviour = 0
show_debug = false
json_file = ExtResource("1_pf2jc")
symbols = PackedStringArray("Squar", "SquarIdk", "StrageSquar")
frames = Dictionary[StringName, PackedVector4Array]({
&"Squar": PackedVector4Array(0, 0, 28, 28, 28, 0, 24, 24, 52, 0, 20, 20),
&"SquarIdk": PackedVector4Array(72, 0, 28, 28, 100, 0, 24, 24, 124, 0, 20, 20),
&"StrageSquar": PackedVector4Array(144, 0, 28, 28)
})
metadata/_custom_type_script = "uid://c3jgyrwe6kosn"

[node name="Node2D" type="Node2D"]
script = SubResource("GDScript_pf2jc")

[node name="Sprite2D" type="Sprite2D" parent="."]
texture_filter = 1
texture = SubResource("AtlasTexture_pbnok")
